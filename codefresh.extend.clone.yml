version: '1.0'
steps:
  git_clone:
      image: codefreshio/git-image:latest
      working_directory: ${{main_clone}}
      commands:
        - bash -c 'echo codefresh repo name is ${{CF_REPO_NAME}}'
        - bash -c 'rm -rf /codefresh/volume/${{CF_REPO_NAME}}/'
        - git clone https://${{GIT_TOKEN}}@github.com/${{CF_REPO_OWNER}}/${{CF_REPO_NAME}}.git /codefresh/volume/${{CF_REPO_NAME}}
        - bash -c 'cd /codefresh/volume/${{CF_REPO_NAME}}/ && git checkout ${{CF_BRANCH}} && git branch && git status'
        - ls -l /codefresh/volume/${{CF_REPO_NAME}}
    
  build_another_prj:
    type: build
    description: Build an Image from a Different Git Repository
    working_directory: /codefresh/volume/${{CF_REPO_NAME}}
    image_name: codefreshio/yaml-example-dif-git-repo
    dockerfile: Dockerfile
    tag: ${{CF_BRANCH}}
